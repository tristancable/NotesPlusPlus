@page "/"
@using Notes__.Utilities
@inject FolderService FolderService

<h3>Folders</h3>

<!-- Display the folders dynamically -->
<div>
    <!-- Input for folder name -->
    <input @bind="newFolderName" placeholder="Enter folder name" />
    <button @onclick="CreateFolder">Create New Folder</button>

    <ul>
        @foreach (var folderName in folders)
        {
            <li>
                <a href="@($"/folder/{folderName}")">@folderName</a>
            </li>
        }
    </ul>
</div>

@code {
    private List<string> folders = new();
    private string newFolderName = string.Empty;

    // Load folders on page initialization
    protected override void OnInitialized()
    {
        folders = FolderService.GetFolders();
    }

    private void CreateFolder()
    {
        if (!string.IsNullOrWhiteSpace(newFolderName))
        {
            FolderService.CreateFolder(newFolderName);
            folders = FolderService.GetFolders(); // Refresh folders
            newFolderName = string.Empty; // Clear input field
        }
    }
}
