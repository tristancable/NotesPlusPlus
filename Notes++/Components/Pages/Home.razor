@page "/"
@using Notes__.Utilities
@inject FolderService FolderService

<h3>Folders</h3>

<div class="creation-button">
    <input @bind="newFolderName" placeholder="Enter folder name" />
    <button @onclick="CreateFolder">Create New Folder</button>
</div>

<ul class="folder-list">
    @foreach (var folderName in folders)
    {
        <li class="folder-item">
            <a href="@($"/folder/{folderName}")" class="folder-link">
                <i class="folder-icon">
                <i class="bi bi-folder"></i>
                </i>
                @folderName
            </a>
        </li>
    }
</ul>

@code {
    private List<string> folders = new();
    private string newFolderName = string.Empty;

    // Load folders on page initialization
    protected override void OnInitialized()
    {
        folders = FolderService.GetFolders();
    }

    private void CreateFolder()
    {
        if (!string.IsNullOrWhiteSpace(newFolderName))
        {
            FolderService.CreateFolder(newFolderName);
            folders = FolderService.GetFolders(); // Refresh folders
            newFolderName = string.Empty; // Clear input field
        }
    }
}
